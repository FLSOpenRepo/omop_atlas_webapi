/// 
Class User.conceptrelationship Extends (%Persistent, Base) [ ClassType = persistent, DdlAllowed, Final, Owner = {kchalyh}, ProcedureBlock, SqlRowIdPrivate, SqlTableName = concept_relationship ]
{

/// Property conceptrelationshipid As %Library.Integer(MAXVAL = 2147483647, MINVAL = -2147483648) [ Required, SqlColumnNumber = 2, SqlFieldName = concept_relationship_id ];
Property conceptid1 As %Library.Integer(MAXVAL = 2147483647, MINVAL = -2147483648) [ Required, SqlColumnNumber = 3, SqlFieldName = concept_id_1 ];

Property conceptid2 As %Library.Integer(MAXVAL = 2147483647, MINVAL = -2147483648) [ Required, SqlColumnNumber = 4, SqlFieldName = concept_id_2 ];

Property relationshipid As %Library.String(MAXLEN = 20) [ Required, SqlColumnNumber = 5, SqlFieldName = relationship_id ];

Property validstartdate As %Library.Date [ Required, SqlColumnNumber = 6, SqlFieldName = valid_start_date ];

Property validenddate As %Library.Date [ Required, SqlColumnNumber = 7, SqlFieldName = valid_end_date ];

Property invalidreason As %Library.String(MAXLEN = 1) [ SqlColumnNumber = 8, SqlFieldName = invalid_reason ];

Parameter USEEXTENTSET = 1;

/// Bitmap Extent Index auto-generated by DDL CREATE TABLE statement.  Do not edit the SqlName of this index.
Index DDLBEIndex [ Extent, SqlName = "%%DDLBEIndex", Type = bitmap ];

ClassMethod InsertLine(fileLine As %String, delimiter As %Char = ",") As %Status [ Language = objectscript ]
{
	//"INSERT INTO concept_relationship(concept_id_1,concept_id_2,relationship_id,valid_start_date,valid_end_date,invalid_reason) VALUES (?,?,?,?,?,?)"
	s:$p(fileLine,delimiter,4)?4N1"-"2N1"-"2N $p(fileLine,delimiter,4) = $zdh($p($p(fileLine,delimiter,4), " ", 1),3)
	s:$p(fileLine,delimiter,5)?4N1"-"2N1"-"2N $p(fileLine,delimiter,5) = $zdh($p($p(fileLine,delimiter,5), " ", 1),3)
	s:$p(fileLine,delimiter,4)?8N $p(fileLine,delimiter,4) = $zdh($p($p(fileLine,delimiter,4), " ", 1),5)
	s:$p(fileLine,delimiter,5)?8N $p(fileLine,delimiter,5) = $zdh($p($p(fileLine,delimiter,5), " ", 1),5)
	
	set obj = ..%New()
	
	set obj.conceptid1 = $p(fileLine,delimiter,1)
	set obj.conceptid2 = $p(fileLine,delimiter,2)
	set obj.relationshipid = $p(fileLine,delimiter,3)
	set obj.validstartdate = $p(fileLine,delimiter,4)
	set obj.validenddate =$p(fileLine,delimiter,5)
	set obj.invalidreason = $p(fileLine,delimiter,6)
	
	quit obj.%Save()
}

Storage Default
{
<Data name="conceptrelationshipDefaultData">
<Value name="1">
<Value>conceptid1</Value>
</Value>
<Value name="2">
<Value>conceptid2</Value>
</Value>
<Value name="3">
<Value>relationshipid</Value>
</Value>
<Value name="4">
<Value>validstartdate</Value>
</Value>
<Value name="5">
<Value>validenddate</Value>
</Value>
<Value name="6">
<Value>invalidreason</Value>
</Value>
</Data>
<DataLocation>^poCN.CqR3.1</DataLocation>
<DefaultData>conceptrelationshipDefaultData</DefaultData>
<ExtentLocation>^poCN.CqR3</ExtentLocation>
<IdLocation>^poCN.CqR3.1</IdLocation>
<Index name="DDLBEIndex">
<Location>^poCN.CqR3.2</Location>
</Index>
<Index name="IDKEY">
<Location>^poCN.CqR3.1</Location>
</Index>
<IndexLocation>^poCN.CqR3.I</IndexLocation>
<StreamLocation>^poCN.CqR3.S</StreamLocation>
<Type>%Storage.Persistent</Type>
}

}

